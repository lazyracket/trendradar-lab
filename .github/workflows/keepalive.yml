name: Keepalive

on:
  schedule:
    - cron: "0 0 1 * *"  # 每月 1 号检查一次
  workflow_dispatch:

jobs:
  keepalive:
    runs-on: ubuntu-latest
    permissions:
      actions: write
    steps:
      - name: Re-enable disabled workflows
        run: |
          gh workflow list --all | grep disabled_inactivity | while read -r name _ id _; do
            gh workflow enable "$id"
            echo "Re-enabled: $name"
          done
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          GH_REPO: ${{ github.repository }}
